<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sre on Xing Yahao</title>
    <link>https://xingyahao.com/tags/sre/</link>
    <description>Recent content in Sre on Xing Yahao</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <copyright>Â© Xing Yahao</copyright>
    <lastBuildDate>Tue, 31 Dec 2024 09:21:51 +0900</lastBuildDate>
    <atom:link href="https://xingyahao.com/tags/sre/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>AWS ECSã®æ—¥å¸¸é‹ç”¨ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ”¹å–„ãŸã‚ã®E1sã®ä½¿ç”¨</title>
      <link>https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security-ja/</link>
      <pubDate>Tue, 31 Dec 2024 09:21:51 +0900</pubDate>
      <guid>https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security-ja/</guid>
      <description>&lt;h2 id=&#34;ã¯ã˜ã‚ã«&#34;&gt;ã¯ã˜ã‚ã«&lt;/h2&gt;&#xA;&lt;p&gt;ã„ã¾ã®ã§ã¯ã€ç§ãŒã„ã‚‹SREãƒãƒ¼ãƒ ã¯é–‹ç™ºè€…ãŒORMãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€šã˜ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã‚Œã«ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã—ãªãŒã‚‰æœ¬ç•ªç’°å¢ƒã®æœ€æ–°ã‚¹ã‚­ãƒ¼ãƒã‚’ç¶­æŒã™ã‚‹å¿…è¦ã®ãŸã‚ã€æœ¬ç•ªç’°å¢ƒè¤‡è£½ã—ã¦ã€é–‹ç™ºè€…ã‚¢ã‚¯ã‚»ã‚¹ç”¨ã®ç’°å¢ƒã‚’æä¾›ã—ã¦ãã¾ã—ãŸã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»¥å‰ã€ã‚·ã‚¹ãƒ†ãƒ ã®æœ¬ç•ªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯å®Œå…¨ã«EC2ã‹ã‚‰ECSã«ç§»è¡Œã—ã¾ã—ãŸãŒã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ãªç§»è¡ŒãŒå®Œäº†ã—ã¦ã„ãªã‹ã£ãŸãŸã‚ã€å¼•ãç¶šãå°‚ç”¨ã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ä¾å­˜ã—ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¯ã„ãã¤ã‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸï¼š&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;SSHã‚­ãƒ¼ã®ç®¡ç†&lt;/strong&gt;ï¼šã‚µãƒ¼ãƒãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ç”¨&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®åˆ¶é™&lt;/strong&gt;ï¼šé‹ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;è¤‡é›‘ãªCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³&lt;/strong&gt;ï¼šEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ç´ã¥ã„ã¦ã„ã‚‹&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;é«˜é¡ãªAWSã‚³ã‚¹ãƒˆ&lt;/strong&gt;ï¼šç¶™ç¶šçš„ãªEC2ä½¿ç”¨ã«ã‚ˆã‚‹&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯&lt;/strong&gt;ï¼šç²’åº¦ã®ä½ã„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã¨é™ã‚‰ã‚ŒãŸç›£æŸ»æ©Ÿèƒ½&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;ã“ã‚Œã‚‰ã®å•é¡Œã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã€&lt;a href=&#34;https://github.com/keidarcy/e1s&#34;&gt;e1s&lt;/a&gt;ï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ECSãƒªã‚½ãƒ¼ã‚¹ã‚’ç®¡ç†ã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ï¼‰ã‚’ECS Execã¨çµ±åˆã—ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹ã®EC2ãƒ™ãƒ¼ã‚¹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç½®ãæ›ãˆã¾ã—ãŸã€‚ã“ã®ç§»è¡Œã«ã‚ˆã‚Šã€é‹ç”¨ãŒç°¡ç´ åŒ–ã•ã‚Œã€ã‚³ã‚¹ãƒˆãŒå‰Šæ¸›ã•ã‚Œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒå‘ä¸Šã—ã¾ã—ãŸã€‚&lt;/p&gt;&#xA;&lt;h2 id=&#34;æ—§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ¯”è¼ƒ&#34;&gt;æ—§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ¯”è¼ƒ&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ—§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼šå°‚ç”¨EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹çµŒç”±ã®ã‚¢ã‚¯ã‚»ã‚¹&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¯ç‰¹å®šã®EC2ã‚µãƒ¼ãƒãƒ¼ã«SSHã‚­ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³&lt;/li&gt;&#xA;&lt;li&gt;é‹ç”¨ã‚¿ã‚¹ã‚¯ã¯ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä¸Šã§æ‰‹å‹•å®Ÿè¡Œ&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://storage.googleapis.com/zenn-user-upload/cbe42adfc429-20241231.png&#34; alt=&#34;old-workflow.png&#34; loading=&#34;lazy&#34; decoding=&#34;async&#34;&gt;&#xA;&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;æ–°ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼še1sã‚’ä½¿ç”¨ã—ãŸECSãƒ™ãƒ¼ã‚¹ã®é‹ç”¨&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¯ã€&lt;a href=&#34;https://github.com/onelogin/onelogin-python-aws-assume-role&#34;&gt;onelogin aws assume role cli&lt;/a&gt;ï¼ˆOneLoginã¯ç§ãŸã¡ã®ä¼šç¤¾å…¨ä½“ã§ä½¿ç”¨ã—ã¦ã„ã‚‹IDãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€AWSã®ä¸€æ™‚çš„ãªèªè¨¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/li&gt;&#xA;&lt;li&gt;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®ç†ç”±ã‹ã‚‰ã€æœ¬ç•ªã‚³ãƒ³ãƒ†ãƒŠã®execã¯ç„¡åŠ¹ã«ã—ãŸã¾ã¾ã§ã€é‹ç”¨ã‚³ãƒ³ãƒ†ãƒŠã«å¯¾ã—ã¦ECS Execã‚¢ã‚¯ã‚»ã‚¹ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã€‚&lt;/li&gt;&#xA;&lt;li&gt;ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¯ã€&lt;a href=&#34;https://github.com/keidarcy/e1s&#34;&gt;e1s&lt;/a&gt;ã‚’ä½¿ç”¨ã—ã€ç‰¹å®šã®AWSèªè¨¼æƒ…å ±ã§ECS Execã‚’ç°¡å˜ã«å®Ÿè¡Œã—ã¦ã€ç›£æŸ»ãƒ­ã‚°ãŒå®Œå…¨ã«è¨˜éŒ²ã•ã‚ŒãŸçŠ¶æ…‹ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’æ“ä½œã—ã¾ã™ã€‚&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;img src=&#34;https://storage.googleapis.com/zenn-user-upload/c733932fd992-20241231.png&#34; alt=&#34;new-workflow.png&#34; loading=&#34;lazy&#34; decoding=&#34;async&#34;&gt;&#xA;&lt;/p&gt;&#xA;&lt;h2 id=&#34;ãƒ¡ãƒªãƒƒãƒˆæ¦‚è¦&#34;&gt;ãƒ¡ãƒªãƒƒãƒˆæ¦‚è¦&lt;/h2&gt;&#xA;&lt;h3 id=&#34;è¤‡é›‘ã•ã®è»½æ¸›&#34;&gt;&lt;strong&gt;è¤‡é›‘ã•ã®è»½æ¸›&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SSHã‚­ãƒ¼ã¨å°‚ç”¨EC2ã‚µãƒ¼ãƒãƒ¼ã®å¿…è¦æ€§ã‚’æ’é™¤ã—ã€ã‚­ãƒ¼ç®¡ç†ã«é–¢é€£ã™ã‚‹æ‰‹å‹•é‹ç”¨ã‚’å‰Šæ¸›&lt;/li&gt;&#xA;&lt;li&gt;EC2ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ä»¶ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§CIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç°¡ç´ åŒ–&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å¼·åŒ–&#34;&gt;&lt;strong&gt;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å¼·åŒ–&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;SSHã‚­ãƒ¼ã®ç®¡ç†ãŒä¸è¦ã¨ãªã‚Šã€å¿˜ã‚ŒãŸã‚Šç´›å¤±ã—ãŸã‚Šã™ã‚‹ãƒªã‚¹ã‚¯ã‚’æ’é™¤&lt;/li&gt;&#xA;&lt;li&gt;æœ¬ç•ªç’°å¢ƒã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç‰¹å®šã®ECSã‚³ãƒ³ãƒ†ãƒŠã«åˆ†é›¢&lt;/li&gt;&#xA;&lt;li&gt;OneLoginä»˜ä¸ã®IAMãƒ­ãƒ¼ãƒ«ã‚’é€šã˜ã¦ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRBACï¼‰ã‚’å¼·åˆ¶&lt;/li&gt;&#xA;&lt;li&gt;ECS Execã®å‡ºåŠ›ã‚’S3ã«ãƒ­ã‚°è¨˜éŒ²ã—ã€ç›£æŸ»ã¨ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Š&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;ã‚³ã‚¹ãƒˆåŠ¹ç‡&#34;&gt;&lt;strong&gt;ã‚³ã‚¹ãƒˆåŠ¹ç‡&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;ç¶™ç¶šçš„ãªEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§AWSè²»ç”¨ã‚’å¤§å¹…ã«å‰Šæ¸›&lt;/li&gt;&#xA;&lt;li&gt;EC2å›ºæœ‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ’é™¤ã™ã‚‹ã“ã¨ã§CIã‚³ã‚¹ãƒˆã‚’å‰Šæ¸›&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–&lt;/h2&gt;&#xA;&lt;p&gt;ç¾ä»£ã®ãƒ†ãƒƒã‚¯ãƒãƒ¼ãƒ ã«ã¨ã£ã¦ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨é‹ç”¨åŠ¹ç‡ã®ç®¡ç†ã¯é‡è¦ã§ã™ã€‚&lt;a href=&#34;https://github.com/keidarcy/e1s&#34;&gt;e1s&lt;/a&gt;ã¸ã®ç§»è¡Œã«ã‚ˆã‚Šã€ç§ãŸã¡ã®é‹ç”¨ã¯ã‚ˆã‚Šã‚¹ãƒªãƒ ã§ã€ã‚ˆã‚Šå®‰å…¨ã§ã€ã‚ˆã‚Šã‚³ã‚¹ãƒˆåŠ¹ç‡ã®è‰¯ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¸ã¨æ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚&lt;a href=&#34;https://github.com/keidarcy/e1s&#34;&gt;e1s&lt;/a&gt;ãŒçš†æ§˜ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã®ä¸€éƒ¨ã¨ãªã‚Šã€ç§ãŸã¡ã¨åŒæ§˜ã«é‹ç”¨ã‚’ç°¡ç´ åŒ–ã™ã‚‹ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ï¼&lt;/p&gt;</description>
    </item>
    <item>
      <title>Integrate E1s to Improve AWS ECS Daily Operations with Security</title>
      <link>https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/</link>
      <pubDate>Tue, 31 Dec 2024 09:21:51 +0900</pubDate>
      <guid>https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/</guid>
      <description>&lt;h2 id=&#34;introduction&#34;&gt;Introduction&lt;/h2&gt;&#xA;&lt;p&gt;In my organization, we maintained a feature that allows developers to access databases via ORM methods. This required duplicating the environment to provide a separate environment for developer access, ensuring security while maintaining an up-to-date deployment with the latest schema for production.&lt;/p&gt;&#xA;&lt;p&gt;Previously, we had fully migrated the system production traffic from EC2 to ECS, but the database access workflow continued to rely on dedicated EC2 instances due to the incomplete legacy migration. However, this approach introduced several challenges:&lt;/p&gt;</description>
    </item>
    <item>
      <title>ã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹SLOã§Datadogã®SLOç®¡ç†ã‚’åŠ¹ç‡åŒ–ã™ã‚‹</title>
      <link>https://xingyahao.com/posts/streamlining-datadog-slo-management-with-time-slice-slos/</link>
      <pubDate>Fri, 27 Dec 2024 11:52:46 +0900</pubDate>
      <guid>https://xingyahao.com/posts/streamlining-datadog-slo-management-with-time-slice-slos/</guid>
      <description>&lt;h3 id=&#34;ã¯ã˜ã‚ã«&#34;&gt;ã¯ã˜ã‚ã«&lt;/h3&gt;&#xA;&lt;p&gt;Datadogã®SLOã«ã¯3ç¨®é¡ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ï¼šãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ SLO (&lt;a href=&#34;https://docs.datadoghq.com/service_management/service_level_objectives/monitor/&#34;&gt;Monitor-based SLOs&lt;/a&gt;)ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ™ãƒ¼ã‚¹ SLO (&lt;a href=&#34;https://docs.datadoghq.com/service_management/service_level_objectives/metric/&#34;&gt;Metric-based SLOs&lt;/a&gt;)ã€ãã—ã¦æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹ SLO (&lt;a href=&#34;https://docs.datadoghq.com/service_management/service_level_objectives/time_slice/&#34;&gt;Time Slice SLOs&lt;/a&gt;)ã§ã™ã€‚&lt;/p&gt;&#xA;&lt;p&gt;ä»Šå›ã¯ã€ç‰¹ã«ã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹ SLOã®åˆ©ä¾¿æ€§ã¨ãƒ¡ãƒªãƒƒãƒˆã«ã¤ã„ã¦ã€å…·ä½“ä¾‹ã‚’æŒ™ã’ã¦èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;å¾“æ¥ã®æ–¹æ³•-ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹-slo&#34;&gt;å¾“æ¥ã®æ–¹æ³•: ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ SLO&lt;/h3&gt;&#xA;&lt;p&gt;ã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹ SLOãŒç™»å ´ã™ã‚‹ä»¥å‰ã€ãŸã¨ãˆã°Node.jsã®Express APIã«ãŠã‘ã‚‹ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼SLOã‚’ä½œæˆã™ã‚‹å ´åˆã€&lt;strong&gt;ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ SLO&lt;/strong&gt;ã‚’ä½¿ç”¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã—ãŸã€‚ä»¥ä¸‹ã¯Terraformã‚’ä½¿ã£ãŸä¾‹ã§ã™ã€‚&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hcl&#34; data-lang=&#34;hcl&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fe8019&#34;&gt;resource&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;datadog_monitor&amp;#34; &amp;#34;request_get_latency&amp;#34;&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  name    &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;ğŸ“ [SLO] Resource Get API has an abnormal latency&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  type    &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;query alert&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  message &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;Resource Get API latency is above 1 second&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  query   &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span style=&#34;color:#fe8019&#34;&gt;EOT&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fe8019&#34;&gt;percentile&lt;/span&gt;(&lt;span style=&#34;color:#fe8019&#34;&gt;last_5m&lt;/span&gt;):&lt;span style=&#34;color:#fe8019&#34;&gt;p95&lt;/span&gt;:&lt;span style=&#34;color:#fe8019&#34;&gt;trace&lt;/span&gt;.&lt;span style=&#34;color:#fe8019&#34;&gt;express&lt;/span&gt;.&lt;span style=&#34;color:#fe8019&#34;&gt;request&lt;/span&gt;{&lt;span style=&#34;color:#fe8019&#34;&gt;resource_name&lt;/span&gt;:&lt;span style=&#34;color:#fe8019&#34;&gt;get_&lt;/span&gt;&lt;span style=&#34;color:#b8bb26&#34;&gt;${&lt;/span&gt;local.path&lt;span style=&#34;color:#b8bb26&#34;&gt;}&lt;/span&gt;} &amp;gt; &lt;span style=&#34;color:#d3869b&#34;&gt;1&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fe8019&#34;&gt;EOT&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#fe8019&#34;&gt;monitor_thresholds&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    critical &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#d3869b&#34;&gt;1&lt;/span&gt;.&lt;span style=&#34;color:#d3869b&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#928374;font-style:italic&#34;&gt; # 1ç§’&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#928374;font-style:italic&#34;&gt;&lt;/span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  evaluation_delay    &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#d3869b&#34;&gt;300&lt;/span&gt;&lt;span style=&#34;color:#928374;font-style:italic&#34;&gt; # 5åˆ†&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#928374;font-style:italic&#34;&gt;&lt;/span&gt;  require_full_window &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#fabd2f&#34;&gt;false&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#fe8019&#34;&gt;resource&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;datadog_service_level_objective&amp;#34; &amp;#34;request_get_latency&amp;#34;&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  name        &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;ğŸï¸ Get API p95 latency *monitor* SLO&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  type        &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;monitor&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  description &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;99.9%ã®æ™‚é–“ã€Get APIã®p95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ãŒ1ç§’ä»¥ä¸‹ã§ã‚ã‚‹ã“ã¨ã€‚&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#fe8019&#34;&gt;thresholds&lt;/span&gt; {&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    timeframe &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#b8bb26&#34;&gt;&amp;#34;30d&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    target    &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#d3869b&#34;&gt;99&lt;/span&gt;.&lt;span style=&#34;color:#d3869b&#34;&gt;9&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  monitor_ids &lt;span style=&#34;color:#fe8019&#34;&gt;=&lt;/span&gt; [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#fe8019&#34;&gt;datadog_monitor&lt;/span&gt;.&lt;span style=&#34;color:#fe8019&#34;&gt;request_get_latency&lt;/span&gt;.&lt;span style=&#34;color:#fe8019&#34;&gt;id&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ¢ãƒ‹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚¹ SLOã§ã¯ã€SLOã‚’ä½œæˆã™ã‚‹å‰ã«ãƒ¢ãƒ‹ã‚¿ãƒ¼ã®å®šç¾©ãŒå¿…è¦ã§ã™ã€‚ã“ã®æ‰‹é–“ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã«ã€ã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹ SLOãŒç™»å ´ã—ã¾ã—ãŸã€‚&lt;/p&gt;</description>
    </item>
    <item>
      <title>Reducing SRE Toil with TypeScript IaC - CDK for Terraform</title>
      <link>https://xingyahao.com/posts/reducing-sre-toil-with-typescript-iac-cdk-for-terraform/</link>
      <pubDate>Tue, 17 Dec 2024 09:21:51 +0900</pubDate>
      <guid>https://xingyahao.com/posts/reducing-sre-toil-with-typescript-iac-cdk-for-terraform/</guid>
      <description>&lt;p&gt;&lt;img src=&#34;https://storage.googleapis.com/zenn-user-upload/efd42572ae73-20241217.png&#34; alt=&#34;Efd42572ae73 20241217&#34; loading=&#34;lazy&#34; decoding=&#34;async&#34;&gt;&#xA;&lt;/p&gt;&#xA;&lt;h2 id=&#34;the-challenge&#34;&gt;The Challenge&lt;/h2&gt;&#xA;&lt;p&gt;While managing infrastructure resources on service providers like AWS and GCP for multiple services, our engineering team frequently needed simple infrastructure changes - creating S3 buckets, modifying CloudFront behaviors, or updating IAM permissions. While we used Terraform, developers weren&amp;rsquo;t comfortable with HCL (HashiCorp Configuration Language), creating redundant or repetitive work for SRE team.&lt;/p&gt;&#xA;&lt;p&gt;After evaluating several Infrastructure as Code (IaC) solutions including Pulumi, AWS CDK, AWS CloudFormation, we chose &lt;a href=&#34;https://developer.hashicorp.com/terraform/cdktf&#34;&gt;CDK for Terraform&lt;/a&gt; (CDKTF) because it offered:&lt;/p&gt;</description>
    </item>
    <item>
      <title>How Do We Optimize Mongodb Latency and Save Money</title>
      <link>https://xingyahao.com/posts/how-do-we-optimize-mongodb-latency-and-save-money/</link>
      <pubDate>Thu, 04 Jan 2024 22:21:06 +0900</pubDate>
      <guid>https://xingyahao.com/posts/how-do-we-optimize-mongodb-latency-and-save-money/</guid>
      <description>&lt;h2 id=&#34;context&#34;&gt;Context&lt;/h2&gt;&#xA;&lt;p&gt;My organization has used MongoDB on MongoDB Atlas for over 6 years. Our backend API language is TypeScript, and we use Mongoose as our ORM. While we appreciate our tech stack&amp;rsquo;s productivity, we also find it challenging to improve server endpoint latency and balance cloud costs.&lt;/p&gt;&#xA;&lt;p&gt;As our active users and product grew this year, we noticed a significant regression in endpoint response time. This indicated a major issue with MongoDBâ€™s performance. As a temporary solution, we scaled up the production cluster tiers, resulting in a 40% increase in our billing. The following graphs are the average MongoDB read latency and monthly billing shift before the project. As you can see we were facing a critical period.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
