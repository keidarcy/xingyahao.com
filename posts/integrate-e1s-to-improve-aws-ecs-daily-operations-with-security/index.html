<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Integrate E1s to Improve AWS ECS Daily Operations with Security - Xing Yahao</title><link rel="icon" type="image/png" href=https://xingyahao.com/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow." />
	<link rel="canonical" href="https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/" />
	<meta name="robots" content="index,follow" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/" />
	<meta property="og:description" content="How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow." />
	<meta property="twitter:description" content="How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow." />
	<meta property="og:url" content="https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/">
  <meta property="og:site_name" content="Xing Yahao">
  <meta property="og:title" content="Integrate E1s to Improve AWS ECS Daily Operations with Security">
  <meta property="og:description" content="How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-31T09:21:51+09:00">
    <meta property="article:modified_time" content="2024-12-31T09:21:51+09:00">
    <meta property="article:tag" content="Aws">
    <meta property="article:tag" content="Ecs">
    <meta property="article:tag" content="Security">
    <meta property="article:tag" content="Sre">
    <meta property="article:tag" content="E1s">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Integrate E1s to Improve AWS ECS Daily Operations with Security">
  <meta name="twitter:description" content="How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow.">
<script src="/js/feather.min.js"></script>
	
	
        <link href="/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.a0365b20801b821dcb1176d4f06a1bc160e04f342324c362fbd3487bb2c5be82.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="/css/dark.d22e2a2879d933a4b781535fc4c4c716e9f9d35ea4986dd0cbabda82effc4bdd.css"  disabled />
	

	
	

	
	

	
	
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		"@type": "BlogPosting",
		"headline": "\"Integrate E1s to Improve AWS ECS Daily Operations with Security\"",
		"description": "\"How we improved our daily operations by integrating e1s with ECS Exec with simplified operations, enhanced security through IAM roles workflow.\"",
		"datePublished": "2024-12-31T09:21:51\u002b09:00",
		"dateModified": "2024-12-31T09:21:51\u002b09:00",
		"url": "\"https://xingyahao.com/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security/\"",
		"author": {
			"@type": "Person",
			"name": "\"Xing Yahao\""
		},
		"publisher": {
			"@type": "Person",
			"name": "\"Xing Yahao\""
		}
	}
	</script>
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="/">Xing Yahao</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/privacy">Privacy</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/tags">Tags</a>
		
		<a href="/categories">Categories</a>
		
		| <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
		<script src="/js/themetoggle.js"></script>
		
	</nav>
</header>


<div class="content-layout post-layout">
	<main>
		<article>
			<div class="title">
				<h1 class="title">Integrate E1s to Improve AWS ECS Daily Operations with Security</h1>
				<div class="meta">Posted on Dec 31, 2024</div>
			</div>
			

			<section class="body">
				<h2 id="introduction">Introduction</h2>
<p>In my organization, we maintained a feature that allows developers to access databases via ORM methods. This required duplicating the environment to provide a separate environment for developer access, ensuring security while maintaining an up-to-date deployment with the latest schema for production.</p>
<p>Previously, we had fully migrated the system production traffic from EC2 to ECS, but the database access workflow continued to rely on dedicated EC2 instances due to the incomplete legacy migration. However, this approach introduced several challenges:</p>
<ul>
<li><strong>Managing SSH keys</strong> for server access.</li>
<li><strong>Limited scalability</strong> and significant operational overhead.</li>
<li><strong>Complex CI/CD pipelines</strong> tied to EC2 instances.</li>
<li><strong>High AWS costs</strong> due to persistent EC2 usage.</li>
<li><strong>Security risks</strong> from less granular access control and limited audit capabilities.</li>
</ul>
<p>To address these issues, I integrated <a href="https://github.com/keidarcy/e1s">e1s</a>(a CLI tool to manage ECS resources in the terminal) with the <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html">ECS Exec</a>, replacing the EC2-based workflow for database access. This transition simplified operations, reduced costs, and enhanced security.</p>
<p>This blog outlines the transformation, comparing the old and new workflows, and highlights the benefits of the integration.</p>
<h2 id="old-vs-new-workflow">Old vs. New Workflow</h2>
<h3 id="old-workflow-ec2-based-operations">Old Workflow: EC2-Based Operations</h3>
<p><strong>Old Workflow: Access via Dedicated EC2 Instances</strong></p>
<ul>
<li>Team members used SSH keys to log into specific EC2 servers.</li>
<li>Operational tasks were performed manually on these instances.</li>
</ul>
<p><img src="https://storage.googleapis.com/zenn-user-upload/cbe42adfc429-20241231.png" alt="old-workflow.png" loading="lazy" decoding="async">
</p>
<p><strong>New Workflow: ECS-Based Operations with e1s</strong></p>
<ul>
<li>Team members use <a href="https://github.com/onelogin/onelogin-python-aws-assume-role">onelogin aws assume role cli</a>(OneLogin is our company-wide identity provider) to get temporary AWS credentials.</li>
<li>ECS Exec access enabled on operation container while keeps production containers exec disabled for security reasons.</li>
<li>Team members use <a href="https://github.com/keidarcy/e1s">e1s</a> with their specific AWS credentials to easily run ECS Exec to operate containers with full audit logs.</li>
</ul>
<p><img src="https://storage.googleapis.com/zenn-user-upload/c733932fd992-20241231.png" alt="new-workflow.png" loading="lazy" decoding="async">
</p>
<h2 id="benefits-overview">Benefits Overview</h2>
<h3 id="reduced-complexity"><strong>Reduced Complexity</strong></h3>
<ul>
<li>Eliminates the need for SSH keys and dedicated EC2 servers, reducing manual operations related to key management.</li>
<li>Simplifies CI workflows by removing EC2 deployment requirements.</li>
</ul>
<h3 id="enhanced-security"><strong>Enhanced Security</strong></h3>
<ul>
<li>No longer requires managing SSH keys, eliminating risks from forgotten or misplaced keys.</li>
<li>Isolates production secrets to specific ECS containers.</li>
<li>Enforces Role-Based Access Control (RBAC) through OneLogin-granted IAM roles.</li>
<li>Logs ECS Exec output to S3 for improved auditing and traceability.</li>
</ul>
<h3 id="cost-efficiency"><strong>Cost Efficiency</strong></h3>
<ul>
<li>Significantly reduces AWS expenses by removing persistent EC2 instances.</li>
<li>Lowers CI costs by eliminating EC2-specific deployment pipelines.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Managing infrastructure security and operational efficiency is crucial for modern tech teams. Migrating to <a href="https://github.com/keidarcy/e1s">e1s</a> has transformed our operations, offering a leaner, more secure, and cost-efficient workflow. I hope <a href="https://github.com/keidarcy/e1s">e1s</a> becomes a part of your toolkit, simplifying your operations just as it has for us!</p>

			</section>

			<div class="post-tags">
				
				
				<nav class="nav tags">
					<ul class="tags">
						
						<li><a href="/tags/aws">aws</a></li>
						
						<li><a href="/tags/ecs">ecs</a></li>
						
						<li><a href="/tags/security">security</a></li>
						
						<li><a href="/tags/sre">sre</a></li>
						
						<li><a href="/tags/e1s">e1s</a></li>
						
					</ul>
				</nav>
				
				
			</div>

			
			
			<section class="related-posts">
				<h2>Related posts</h2>
				<ul>
					
					<li><a href="/posts/integrate-e1s-to-improve-aws-ecs-daily-operations-with-security-ja/">AWS ECSの日常運用とセキュリティの改善ためのE1sの使用</a></li>
					
					<li><a href="/posts/introducing-e1s-the-k9s-inspired-cli-for-aws-ecs/">Introducing E1s the K9s Inspired Cli for Aws Ecs</a></li>
					
					<li><a href="/posts/kubectl-execrec-session-recording-for-kubectl-exec-for-auditing-and-compliance-with-security/">kubectl-execrec: Session Recording for kubectl exec for auditing and compliance with security</a></li>
					
					<li><a href="/posts/comprehensive-amazon-eks-v1-32-upgrade-log-with-terraform-and-karpenter/">A Comprehensive Amazon EKS v1.32 Upgrade Log with Terraform and Karpenter</a></li>
					
				</ul>
			</section>
			
			</article>
	</main>

	
	<aside class="taxonomy-sidebar toc-sidebar" aria-label="Table of contents">
		<section class="taxonomy-group toc-panel">
			<h2>Table of contents</h2>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#old-vs-new-workflow">Old vs. New Workflow</a>
      <ul>
        <li><a href="#old-workflow-ec2-based-operations">Old Workflow: EC2-Based Operations</a></li>
      </ul>
    </li>
    <li><a href="#benefits-overview">Benefits Overview</a>
      <ul>
        <li><a href="#reduced-complexity"><strong>Reduced Complexity</strong></a></li>
        <li><a href="#enhanced-security"><strong>Enhanced Security</strong></a></li>
        <li><a href="#cost-efficiency"><strong>Cost Efficiency</strong></a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
		</section>
	</aside>
	
</div>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/keidarcy" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://www.linkedin.com/in/xingyahao" rel="me" title="Linkedin"><i data-feather="linkedin"></i></a>
    <a class="border"></a><a class="soc" href="https://x.com/keidracy" rel="me" title="X"><span aria-hidden="true">X</span></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2026  © Xing Yahao
  </div>
</footer>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-FGTFKPMCX2"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-FGTFKPMCX2');
        }
      </script>
<script>
  feather.replace()
</script></div>
    </body>
</html>
